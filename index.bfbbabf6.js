document.addEventListener("DOMContentLoaded",function(){new class{constructor(){this.loadingBar=document.getElementById("loading-bar"),this.spinnerContainer=document.getElementById("spinner-container"),this.videoContainer=document.getElementById("video-container"),this.backgroundVideo=document.getElementById("background-video"),this.navVideo=document.getElementById("navVideo"),this.navigationButton=document.querySelector(".navigation__button"),this.navbar=document.getElementById("navbar"),this.newParent=document.getElementById("header_container"),this.oldParent=document.getElementById("header"),this.box2=document.querySelector(".box2"),this.scrollThreshold=100,this.mobileVideoSrc="mobile-Land-video.mp4",this.desktopVideoSrc="video.mp4",this.navVideoSrc="nav-cam.mp4",this.currentVideo="",this.videoLoaded=!1,this.scrolling=!1,this.isFirstTime=!0,this.init()}init(){this.startLoadingBar(),this.selectVideo(),this.navVideo.src=this.navVideoSrc,this.navVideo.type="video/mp4",window.addEventListener("resize",this.selectVideo.bind(this)),window.addEventListener("scroll",this.throttleScroll.bind(this)),this.createIntersectionObserver(),this.initOverlay(),this.initIntroAnimation(),this.initFeatureBoxVideo()}startLoadingBar(){let e=setInterval(()=>{let t=document.images,i=0;for(let e=0;e<t.length;e++)t[e].complete&&i++;let o=Math.floor(i/t.length*100);this.loadingBar.style.width=o+"%",this.loadingBar.style.backgroundColor=`rgb(${255-2.55*o}, ${255-2.55*o}, ${255-2.55*o})`,100===o&&(clearInterval(e),this.loadingBar.style.width="100%",this.loadingBar.style.backgroundColor="black")},100)}selectVideo(){let e=this.backgroundVideo;e.muted=!0,e.playsinline=!0,window.innerWidth<=768&&"mobile"!==this.currentVideo?(e.src=this.mobileVideoSrc,e.type="video/mp4",this.videoContainer.classList.remove("bg-video--desktop"),e.classList.remove("bg-video--desktop__content_desk"),this.videoContainer.classList.add("bg-video--mobile"),e.classList.add("bg-video--mobile__content_mobile"),e.loop=!1,this.oldParent.insertBefore(this.videoContainer,this.oldParent.firstChild),this.currentVideo="mobile"):window.innerWidth>768&&"desktop"!==this.currentVideo&&(e.src=this.desktopVideoSrc,e.type="video/mp4",this.videoContainer.classList.remove("bg-video--mobile"),e.classList.remove("bg-video--mobile__content_mobile"),this.videoContainer.classList.add("bg-video--desktop"),e.classList.add("bg-video--desktop__content_desk"),this.newParent.insertBefore(this.videoContainer,this.newParent.firstChild),this.currentVideo="desktop"),e.onloadeddata=this.videoLoadSuccess.bind(this),e.onerror=this.videoLoadError.bind(this)}videoLoadSuccess(){this.videoLoaded=!0,this.spinnerContainer.classList.add("hidden"),this.videoContainer.style.display="block"}videoLoadError(){this.selectVideo()}throttleScroll(){this.scrolling||(this.scrolling=!0,window.requestAnimationFrame(()=>{this.handleScroll(),this.scrolling=!1}))}handleScroll(){window.scrollY>this.scrollThreshold?(this.navbar.classList.add("scrolled"),this.navigationButton.classList.add("btn-darkin")):(this.navbar.classList.remove("scrolled"),this.navigationButton.classList.remove("btn-darkin"))}createIntersectionObserver(){let e=new IntersectionObserver(this.animateElement.bind(this),{threshold:.1});document.querySelectorAll(".target").forEach(t=>{let i=0;t.classList.contains("box1")?i=0:t.classList.contains("box2")?i=1e3:t.classList.contains("box3")?i=1e3:t.classList.contains("box4")&&(i=1e3),t.setAttribute("data-delay",i),e.observe(t)})}animateElement(e,t){e.forEach(e=>{e.isIntersecting&&setTimeout(()=>{let i=e.target.getAttribute("data-class");e.target.classList.add(i),t.unobserve(e.target),this.box2.classList.add("box2__fadeImg")},parseInt(e.target.getAttribute("data-delay"))||0)})}initOverlay(){let e=document.getElementById("navi-toggle"),t=document.createElement("div");t.classList.add("overlay"),e.addEventListener("change",()=>{e.checked?(document.body.appendChild(t),setTimeout(()=>t.classList.add("show"),10)):(t.classList.remove("show"),t.addEventListener("transitionend",()=>{t.classList.contains("show")||t.remove()},{once:!0}))}),t.addEventListener("click",()=>{e.checked=!1,t.classList.remove("show"),t.addEventListener("transitionend",()=>{t.classList.contains("show")||t.remove()},{once:!0})})}initIntroAnimation(){gsap.timeline().to(".header",{duration:2.5,x:0,opacity:1,ease:"power2.out"},"-=0.4").to(".header__spans",{duration:1,x:0,opacity:1,ease:"power2.out"},"-=0.4").to(".header__title",{duration:1.1,x:0,opacity:1,ease:"power2.out"},"-=0.4").to(".header__buttons",{duration:1.1,x:0,opacity:1,ease:"power2.out"},"-=0.4").to(".header__paragraph",{duration:1.2,x:0,opacity:1,ease:"power2.out"},"-=0.4")}initFeatureBoxVideo(){let e=document.querySelector(".box1");this.featureBoxVideoContainer=document.getElementById("feature-box");let t=this.featureBoxVideoContainer.querySelector("source");this.isFirstTime=!0;let i=()=>{t.src||(t.src=t.dataset.src,this.featureBoxVideoContainer.load())},o=(e,t)=>{let i;return function(){clearTimeout(i),i=setTimeout(()=>e.apply(this,arguments),t)}},s=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?(i(),this.isFirstTime&&!this.isMobileDevice()?(this.debouncePlayVideo(),this.isFirstTime=!1):this.isMobileDevice()&&this.featureBoxVideoContainer.play()):this.featureBoxVideoContainer.pause()})},{threshold:.5});s.observe(e),this.isMobileDevice()?(this.featureBoxVideoContainer.loop=!0,s.observe(this.featureBoxVideoContainer)):(e.addEventListener("mouseover",o(()=>{this.featureBoxVideoContainer.play()},100)),e.addEventListener("mouseleave",o(()=>{this.featureBoxVideoContainer.pause()},100)))}isMobileDevice(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}debouncePlayVideo(){setTimeout(()=>{this.featureBoxVideoContainer.play(),setTimeout(()=>{this.featureBoxVideoContainer.pause()},this.featureBoxVideoContainer.duration/2*1e3)},500)}debouncePauseVideo(){setTimeout(()=>{this.featureBoxVideoContainer.pause()},500)}}});
//# sourceMappingURL=index.bfbbabf6.js.map
